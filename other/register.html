<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Register - YikeGames</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="../styles/style.css">

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAUZZBN9qoM34lsvyEOeK2znSSw6kKMcEE",
    authDomain: "yikegames-website.firebaseapp.com",
    projectId: "yikegames-website",
    storageBucket: "yikegames-website.firebasestorage.app",
    messagingSenderId: "1086586566551",
    appId: "1:1086586566551:web:b64dfc25e6e6ac5a09b6d2",
    measurementId: "G-FXH0D07D86"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  window.registerUser = async function() {
    const email = document.getElementById("mail").value;
    const password = document.getElementById("password").value;

    try {
      const userCredential = await createUserWithEmailAndPassword(auth, email, password);
      alert(`Account created for ${userCredential.user.email}!`);
      window.location.href = "login.html"; // redirect back to login page
    } catch (error) {
      alert(error.message);
    }
  }
</script>
</head>
<body>
<header>
  <h1>Register</h1>
</header>

<section class="login-form">
  <input type="text" id="email" placeholder="Email" class="input-field">
  <input type="password" id="password" placeholder="Password" class="input-field">
  <button class="btn login-btn" onclick="registerUser()">Register</button>
  <p style="margin-top:10px;">Already have an account? 
      <a href="login.html" style="color:#46a2b4; text-decoration:underline;">Login here</a>
  </p>
</section>

<p class="required">You are not required to use an actual email, emails are not verified.</p>

<a href="/index.html" class="btn">Back</button></a>

<style>
  .login-form {
      display: flex;
      flex-direction: column;
      gap: 20px;
      max-width: 400px;
      margin: 50px auto;
  }
  .input-field {
      padding: 12px 16px;
      border-radius: 12px;
      border: none;
      font-size: 1rem;
      backdrop-filter: blur(8px);
      background: rgba(255,255,255,0.1);
      color: #fff;
      outline: none;
  }
  .input-field::placeholder { color: #ddd; }
</style>

<script>
  document.body.classList.add('fade-enter');
  setTimeout(() => {
    document.body.classList.add('fade-enter-active');
  }, 10);

  document.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', function(e) {
      const href = this.getAttribute('href');
      if (href && !href.startsWith('http')) {
        e.preventDefault();
        document.body.classList.remove('fade-enter-active');
        document.body.classList.add('fade-exit-active');
        setTimeout(() => { window.location.href = href; }, 500);
      }
    });
  });
</script>
</body>
</html>